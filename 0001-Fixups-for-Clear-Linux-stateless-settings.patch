From 142230e50778f1cee9f7f86ecaabd31d232bc130 Mon Sep 17 00:00:00 2001
From: William Douglas <william.douglas@intel.com>
Date: Tue, 7 Aug 2018 22:54:59 +0000
Subject: [PATCH] Fixups for Clear Linux stateless settings

---
 data/fwupd.service.in  | 2 ++
 data/meson.build       | 1 -
 plugins/uefi/uefi.conf | 2 +-
 3 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/data/fwupd.service.in b/data/fwupd.service.in
index 996ff4c..bb3f236 100644
--- a/data/fwupd.service.in
+++ b/data/fwupd.service.in
@@ -5,6 +5,8 @@ After=dbus.service
 Before=gdm.service
 
 [Service]
+MountAPIVFS=yes
+ExecStartPre=@bindir@/systemctl start boot.mount
 Type=dbus
 BusName=org.freedesktop.fwupd
 ExecStart=@libexecdir@/fwupd/fwupd
diff --git a/data/meson.build b/data/meson.build
index 51384d4..0517a2b 100644
--- a/data/meson.build
+++ b/data/meson.build
@@ -38,7 +38,6 @@ if get_option('systemd')
 
   rw_directories = []
   rw_directories += join_paths (localstatedir, 'lib', 'fwupd')
-  rw_directories += join_paths (default_sysconfdir, 'fwupd', 'remotes.d')
   if get_option('plugin_uefi')
     rw_directories += ['-/boot/efi', '-/boot', '-/efi']
   endif
diff --git a/plugins/uefi/uefi.conf b/plugins/uefi/uefi.conf
index 9247db8..55a758c 100644
--- a/plugins/uefi/uefi.conf
+++ b/plugins/uefi/uefi.conf
@@ -2,4 +2,4 @@
 
 # the EFI system partition path used
 # if this is is not /boot/efi, /boot, or /efi
-#OverrideESPMountPoint=
+OverrideESPMountPoint=/boot
-- 
2.18.0

